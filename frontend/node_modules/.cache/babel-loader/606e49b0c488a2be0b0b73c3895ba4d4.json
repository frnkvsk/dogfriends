{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/components/SignupForm.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport { Button, TextField } from '@material-ui/core';\nimport UploadPhoto from './UploadPhoto';\nimport { AuthContext } from '../context/AuthContext';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    border: '1px solid red'\n  },\n  backButton: {\n    margin: '10px'\n  },\n  main: {// display: 'flex',\n    // flexDirection: 'column',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n    // width: '100%',\n    // minWidth: '400px',\n    // border: '1px solid #e0e0e0',\n    // [theme.breakpoints.down('md')]: {\n    //   width: '100%',\n    //   margin: '0px'\n    // },\n    // [theme.breakpoints.up('lg')]: {\n    //   width: '85%',\n    //   margin: '25px 0 25px 0',\n    // },\n    // [theme.breakpoints.up('xl')]: {\n    //   width: '75%',\n    //   margin: '25px 0 25px 0',\n    // },\n  },\n  formElement: {\n    width: '95%',\n    margin: '10px'\n  }\n}));\n\nfunction getSteps() {\n  return ['Create a username and password (required)', 'Enter your contact info (required)', 'Further define your account (optional)', 'Review and confirm account creation'];\n}\n\nexport default function SignupForm({\n  handlePreSignup,\n  handleSignup\n}) {\n  _s();\n\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const token = auth.authState.token;\n  console.log('SignupForm token', token); // Step 1 (required) make sure username and password are valid\n\n  const [username, setUsername] = useState('');\n  const [usernameValid, setUsernameValid] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordValid, setPasswordValid] = useState(''); // Step 2 (required) make sure email is valid and complete registration process\n\n  const [first_name, setFirstName] = useState('');\n  const [last_name, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [emailValid, setEmailValid] = useState(''); // Step 3 (optional) allow the option for new user to further define their account \n\n  const [city, setCity] = useState('');\n  const [state, setState] = useState('');\n  const [country, setCountry] = useState('');\n  const [photo_details, setPhotoDetails] = useState({\n    photo_id: null,\n    photo_url: null\n  });\n\n  const validateUsername = username => {\n    const expression = /^\\s*[a-zA-Z]\\s*(?:\\S[\\t ]*){2,30}/;\n    return expression.test(username);\n  };\n\n  const validatePassword = username => {\n    return password.length && (password.length < 8 || !/[a-z]/.test(password) || !/[A-Z]/.test(password) || !/[\\d]/.test(password));\n  };\n\n  const validateEmail = email => {\n    const expression = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\n    return email.length && expression.test(email);\n  }; // verify username is not already in use and is in valid form\n\n\n  useEffect(() => {\n    const checkUsername = async () => {\n      const res = await handlePreSignup({\n        username\n      });\n      if (res.payload && res.payload.resp) setUsernameValid('Username is already taken.');\n    };\n\n    if (username.length && !validateUsername(username)) {\n      setUsernameValid('Username must be between 3-30 characters and start with a letter [a-zA-Z].');\n    } else {\n      setUsernameValid('');\n      checkUsername();\n    }\n  }, [username, handlePreSignup]); // validate password strength\n\n  useEffect(() => {\n    if (validatePassword(password)) {\n      setPasswordValid('Password must contain lowercase [a-z], uppercase [A-Z], numeric [0-9].');\n    } else {\n      setPasswordValid('');\n    }\n  }, [password]); // validate email\n\n  useEffect(() => {\n    if (validateEmail(email)) {\n      setEmailValid('Email is not valid.');\n    } else {\n      setEmailValid('');\n    }\n  }, [email]);\n\n  const handleSetUsername = e => {\n    setUsername(e.target.value);\n  };\n\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = async () => {\n    if (!usernameValid.length && username.length && !passwordValid.length && password.length) {\n      setActiveStep(prevActiveStep => prevActiveStep + 1);\n      console.log('activeStep1', activeStep);\n\n      if (activeStep === 0) {\n        console.log('activeStep', activeStep);\n        console.log('check if username is available username', username);\n        console.log('handlePreSignup', handlePreSignup);\n      }\n\n      if (activeStep === 1) {\n        console.log('activeStep === 1');\n        const resp = await handleSignup({\n          username,\n          password,\n          first_name,\n          last_name,\n          email,\n          photo_id: null,\n          city,\n          state,\n          country\n        });\n        console.log('SignupForm handleNext resp', resp);\n        setUsernameValid(resp);\n      }\n\n      if (activeStep === steps.length - 1) {\n        console.log('activeStep === steps.length =>', activeStep, '  photo_details', photo_details); // handleSubmit({\n        //   first_name,\n        //   last_name, \n        //   email, \n        //   photo_id: photo_details.photo_id,\n        //   city, \n        //   state, \n        //   country\n        // });\n      }\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(Stepper, {\n      activeStep: activeStep,\n      alternativeLabel: true,\n      children: steps.map(label => /*#__PURE__*/_jsxDEV(Step, {\n        children: /*#__PURE__*/_jsxDEV(StepLabel, {\n          children: label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)\n      }, label, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: activeStep === steps.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          component: 'span',\n          className: classes.main,\n          children: \"All steps completed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleReset,\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          component: 'span',\n          children: activeStep === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.main,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"Username: (required)\",\n              variant: \"outlined\",\n              value: username,\n              error: usernameValid.length,\n              helperText: usernameValid,\n              onChange: e => setUsername(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"Password: (required)\",\n              type: \"password\",\n              variant: \"outlined\",\n              value: password,\n              error: passwordValid.length,\n              helperText: passwordValid,\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this) : activeStep === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.main,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"First Name: (required)\",\n              variant: \"outlined\",\n              value: first_name,\n              onChange: e => setFirstName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"Last Name: (required)\",\n              variant: \"outlined\",\n              value: last_name,\n              onChange: e => setLastName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"Email: (required)\",\n              variant: \"outlined\",\n              type: \"email\",\n              value: email,\n              error: emailValid.length,\n              helperText: emailValid,\n              onChange: e => setEmail(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 17\n          }, this) : activeStep === 2 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.main,\n            children: [/*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"City: (optional)\",\n              variant: \"outlined\",\n              value: city,\n              onChange: e => setCity(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"State: (optional)\",\n              variant: \"outlined\",\n              value: state,\n              onChange: e => setState(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              className: classes.formElement,\n              label: \"Country: (optional)\",\n              variant: \"outlined\",\n              value: country,\n              onChange: e => setCountry(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(UploadPhoto, {\n              token: token,\n              setPhotoDetails: setPhotoDetails\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.main,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Username: \", username]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"First Name: \", first_name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Last Name: \", last_name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Email: \", email]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"City: \", city]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"State: \", state]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [\"Country: \", country]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            disabled: activeStep === 0,\n            onClick: handleBack,\n            className: classes.backButton,\n            children: \"Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: handleNext,\n            children: activeStep === steps.length - 1 ? 'Submit' : 'Next'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SignupForm, \"mcvFaz43dnscL1kbLXCxau8II60=\", false, function () {\n  return [useStyles];\n});\n\n_c = SignupForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignupForm\");","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/components/SignupForm.js"],"names":["React","useState","useContext","useEffect","makeStyles","Stepper","Step","StepLabel","Button","TextField","UploadPhoto","AuthContext","useStyles","theme","root","display","flexDirection","alignItems","justifyContent","width","border","backButton","margin","main","formElement","getSteps","SignupForm","handlePreSignup","handleSignup","classes","auth","token","authState","console","log","username","setUsername","usernameValid","setUsernameValid","password","setPassword","passwordValid","setPasswordValid","first_name","setFirstName","last_name","setLastName","email","setEmail","emailValid","setEmailValid","city","setCity","state","setState","country","setCountry","photo_details","setPhotoDetails","photo_id","photo_url","validateUsername","expression","test","validatePassword","length","validateEmail","checkUsername","res","payload","resp","handleSetUsername","e","target","value","activeStep","setActiveStep","steps","handleNext","prevActiveStep","handleBack","handleReset","map","label"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport { Button, TextField } from '@material-ui/core';\nimport UploadPhoto from './UploadPhoto';\nimport { AuthContext } from '../context/AuthContext';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n    border: '1px solid red'\n  },\n  backButton: {\n    margin: '10px',\n  },\n  main: {\n    // display: 'flex',\n    // flexDirection: 'column',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n    // width: '100%',\n    // minWidth: '400px',\n    \n    // border: '1px solid #e0e0e0',\n    // [theme.breakpoints.down('md')]: {\n    //   width: '100%',\n    //   margin: '0px'\n    // },\n    // [theme.breakpoints.up('lg')]: {\n    //   width: '85%',\n    //   margin: '25px 0 25px 0',\n    // },\n    // [theme.breakpoints.up('xl')]: {\n    //   width: '75%',\n    //   margin: '25px 0 25px 0',\n    // },\n  },\n  formElement: {\n    width: '95%',\n    margin: '10px'\n  },\n}));\n\nfunction getSteps() {\n  return ['Create a username and password (required)', 'Enter your contact info (required)', 'Further define your account (optional)', 'Review and confirm account creation'];\n}\n\nexport default function SignupForm({ handlePreSignup, handleSignup }) {\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const token = auth.authState.token;\n  console.log('SignupForm token',token)\n  // Step 1 (required) make sure username and password are valid\n  const [username, setUsername] = useState('');\n  const [usernameValid, setUsernameValid] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordValid, setPasswordValid] = useState('');\n\n  // Step 2 (required) make sure email is valid and complete registration process\n  const [first_name, setFirstName] = useState('');\n  const [last_name, setLastName] = useState('');  \n  const [email, setEmail] = useState('');\n  const [emailValid, setEmailValid] = useState('');\n  \n  // Step 3 (optional) allow the option for new user to further define their account \n  const [city, setCity] = useState('');\n  const [state, setState] = useState('');\n  const [country, setCountry] = useState('');\n\n  const [photo_details, setPhotoDetails] = useState({\n    photo_id: null,\n    photo_url: null\n  });\n\n  const validateUsername = (username) => {\n    const expression = /^\\s*[a-zA-Z]\\s*(?:\\S[\\t ]*){2,30}/;    \n    return expression.test(username);\n  }\n\n  const validatePassword = (username) => {\n    return password.length && (\n      password.length < 8 || \n      !/[a-z]/.test(password) || \n      !/[A-Z]/.test(password) || \n      !/[\\d]/.test(password)\n    );\n  }\n\n  const validateEmail = (email) => {\n    const expression = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$/;\n    return email.length && expression.test(email)\n}\n  // verify username is not already in use and is in valid form\n  useEffect(() => {\n    const checkUsername = async () => {\n      const res = await handlePreSignup({username});\n      if(res.payload && res.payload.resp) \n        setUsernameValid('Username is already taken.');\n    }\n    if(username.length && !validateUsername(username)) {\n      setUsernameValid('Username must be between 3-30 characters and start with a letter [a-zA-Z].');\n    } else {\n      setUsernameValid('');\n      checkUsername();\n    }\n  }, [username, handlePreSignup]);\n\n  // validate password strength\n  useEffect(() => {  \n    if(validatePassword(password)) {\n      setPasswordValid('Password must contain lowercase [a-z], uppercase [A-Z], numeric [0-9].');  \n    } else {\n      setPasswordValid('');\n    } \n  }, [password]);\n\n  // validate email\n  useEffect(() => {    \n    if(validateEmail(email)) {\n      setEmailValid('Email is not valid.')\n    } else {\n      setEmailValid('');\n    }   \n  }, [email]);\n\n  const handleSetUsername = e => {\n    setUsername(e.target.value)\n  }\n\n  const [activeStep, setActiveStep] = React.useState(0);\n  const steps = getSteps();\n\n  const handleNext = async () => {\n    if(!usernameValid.length && username.length && !passwordValid.length && password.length) {\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      console.log('activeStep1',activeStep)\n      if(activeStep === 0) {\n        console.log('activeStep',activeStep)\n        console.log('check if username is available username',username)\n        console.log('handlePreSignup',handlePreSignup)\n      }\n      if(activeStep === 1) {\n        console.log('activeStep === 1')\n        const resp = await handleSignup({\n          username,\n          password,\n          first_name,\n          last_name, \n          email, \n          photo_id: null,\n          city, \n          state, \n          country\n        });\n        console.log('SignupForm handleNext resp',resp)\n        setUsernameValid(resp)\n      }\n      if(activeStep === steps.length-1) {\n        console.log('activeStep === steps.length =>',activeStep,'  photo_details',photo_details)\n        // handleSubmit({\n        //   first_name,\n        //   last_name, \n        //   email, \n        //   photo_id: photo_details.photo_id,\n        //   city, \n        //   state, \n        //   country\n        // });\n      }\n    }\n    \n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Stepper activeStep={activeStep} alternativeLabel>\n        {steps.map((label) => (\n          <Step key={label}>\n            <StepLabel>{label}</StepLabel>\n          </Step>\n        ))}\n      </Stepper>\n      <div>\n        {activeStep === steps.length ? (\n          <div>\n            <div component={'span'} className={classes.main}>All steps completed</div>\n            <Button onClick={handleReset}>Reset</Button>\n          </div>\n        ) : (\n          <div>\n            <div component={'span'}>\n              {activeStep===0 ?\n              (\n                <div className={classes.main}>\n                  <TextField                     \n                    className={classes.formElement} \n                    label='Username: (required)' \n                    variant='outlined' \n                    value={username} \n                    error={usernameValid.length}\n                    helperText= {usernameValid}\n                    onChange={e => setUsername(e.target.value)}/>\n                  <TextField \n                    className={classes.formElement} \n                    label='Password: (required)' \n                    type='password'\n                    variant='outlined' \n                    value={password} \n                    error={passwordValid.length}\n                    helperText={passwordValid}\n                    onChange={e => setPassword(e.target.value)}/>\n                </div>\n              ) :\n              activeStep===1 ?\n              (\n                <div className={classes.main}>\n                  <TextField \n                    className={classes.formElement} \n                    label='First Name: (required)' \n                    variant='outlined' \n                    value={first_name} \n                    onChange={e => setFirstName(e.target.value)}/>\n                  <TextField \n                    className={classes.formElement} \n                    label='Last Name: (required)' \n                    variant='outlined' \n                    value={last_name} \n                    onChange={e => setLastName(e.target.value)}/>\n                  <TextField \n                    className={classes.formElement} \n                    label='Email: (required)' \n                    variant='outlined' \n                    type='email'\n                    value={email} \n                    error={emailValid.length}\n                    helperText={emailValid}\n                    onChange={e => setEmail(e.target.value)}/>\n                </div>\n              ) :\n              activeStep===2 ?\n              (\n                <div className={classes.main}>\n                  <TextField \n                    className={classes.formElement} \n                    label='City: (optional)' \n                    variant='outlined' \n                    value={city} \n                    onChange={e => setCity(e.target.value)}/>\n                  <TextField \n                    className={classes.formElement} \n                    label='State: (optional)' \n                    variant='outlined' \n                    value={state} \n                    onChange={e => setState(e.target.value)}/>\n                  <TextField \n                    className={classes.formElement} \n                    label='Country: (optional)' \n                    variant='outlined' \n                    value={country} \n                    onChange={e => setCountry(e.target.value)}/>\n                  <UploadPhoto token={token} setPhotoDetails={setPhotoDetails} />\n                </div>\n              ) :\n              (\n                <div className={classes.main}>\n                  <div>\n                    <div>Username: {username}</div>\n                    <div>First Name: {first_name}</div>\n                    <div>Last Name: {last_name}</div>\n                    <div>Email: {email}</div>\n                    <div>City: {city}</div>\n                    <div>State: {state}</div>\n                    <div>Country: {country}</div>\n                  </div>\n                </div>\n              )}</div>\n            <div>\n              <Button\n                disabled={activeStep === 0}\n                onClick={handleBack}\n                className={classes.backButton}\n              >\n                Back\n              </Button>\n              <Button variant=\"contained\" color=\"primary\" onClick={handleNext}>\n                {activeStep === steps.length - 1 ? 'Submit' : 'Next'}\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}