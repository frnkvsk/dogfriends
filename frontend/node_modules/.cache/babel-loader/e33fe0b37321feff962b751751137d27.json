{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/dogfriends-app/src/features/dogfriends/components/BlogComments.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { getCommentsDataById, addNewComment, removeComment, selectComments } from '../dogfriendsCommentsSlice';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, OutlinedInput } from '@material-ui/core';\nimport { AuthContext } from '../context/AuthContext';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: '0px' // border: '1px solid pink',\n\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    margin: '30px 0 20px 0'\n  },\n  input: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n    marginRight: '5px'\n  },\n  delete: {\n    color: 'red',\n    fontSize: '22px',\n    fontWeight: '700',\n    padding: '0 10px 0 5px',\n    cursor: 'pointer'\n  },\n  deleteWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: '5px'\n  },\n  button: {\n    width: '60px',\n    marginTop: '10px'\n  }\n}));\n\nconst BlogComments = ({\n  id\n}) => {\n  _s();\n\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const commentList = useSelector(selectComments);\n  const [comment, setComment] = useState('');\n  useEffect(() => {\n    dispatch(getCommentsDataById(id));\n  }, [dispatch, id]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    if (comment.length) {\n      const payload = {\n        id: id,\n        comment: comment,\n        token: auth.authState.token\n      };\n      await dispatch(addNewComment(payload));\n      dispatch(getCommentsDataById(id));\n      setComment('');\n    }\n  };\n\n  const handleDelete = deleteId => {\n    dispatch(removeComment({\n      id: deleteId,\n      username: auth.authState.userInfo.username,\n      token: auth.authState.token\n    }));\n    setTimeout(() => {\n      dispatch(getCommentsDataById(id));\n    }, 100);\n  };\n\n  const handleChange = e => {\n    setComment(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.root,\n      children: commentList.data.length ? commentList.data.map(e => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.deleteWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.delete,\n          onClick: () => handleDelete(e.id),\n          children: \"x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this), e.text]\n      }, e.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)) : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: classes.form,\n      noValidate: true,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(OutlinedInput, {\n        name: \"title\",\n        className: classes.input,\n        placeholder: \"New Comment\",\n        variant: \"outlined\",\n        autoFocus: true,\n        value: comment,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: classes.button,\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: handleSubmit,\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(BlogComments, \"IEozXuHO4PitBZ3ISK1fTNANfv8=\", false, function () {\n  return [useStyles, useDispatch, useSelector];\n});\n\n_c = BlogComments;\nexport default BlogComments;\n\nvar _c;\n\n$RefreshReg$(_c, \"BlogComments\");","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/dogfriends-app/src/features/dogfriends/components/BlogComments.js"],"names":["React","useContext","useEffect","useState","useSelector","useDispatch","getCommentsDataById","addNewComment","removeComment","selectComments","makeStyles","Button","OutlinedInput","AuthContext","useStyles","theme","root","margin","form","display","flexDirection","width","input","backgroundColor","marginRight","delete","color","fontSize","fontWeight","padding","cursor","deleteWrapper","alignItems","marginTop","button","BlogComments","id","classes","auth","dispatch","commentList","comment","setComment","handleSubmit","e","preventDefault","length","payload","token","authState","handleDelete","deleteId","username","userInfo","setTimeout","handleChange","target","value","data","map","text"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { \n  getCommentsDataById,\n  addNewComment,\n  removeComment,\n  selectComments,\n } from '../dogfriendsCommentsSlice';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, OutlinedInput } from '@material-ui/core';\nimport { AuthContext } from '../context/AuthContext';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    margin: '0px',\n    // border: '1px solid pink',\n  },\n  form: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    margin: '30px 0 20px 0',\n  },\n  input: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n    marginRight: '5px',\n  },\n  delete: {\n    color: 'red',\n    fontSize: '22px',\n    fontWeight: '700',\n    padding: '0 10px 0 5px',\n    cursor: 'pointer',\n  },\n  deleteWrapper: {\n    display: 'flex',\n    alignItems: 'center',\n    marginTop: '5px',\n  },\n  button: {\n    width: '60px',\n    marginTop: '10px',\n  }\n}));\n\nconst BlogComments = ({id}) => {\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const commentList = useSelector(selectComments);\n  const [comment, setComment] = useState('');\n\n  useEffect(() => {    \n    dispatch(getCommentsDataById(id)); \n  }, [dispatch, id]);  \n\n  const handleSubmit = async e => {   \n    e.preventDefault();\n    if(comment.length) {\n      const payload = {\n        id: id,\n        comment: comment, \n        token: auth.authState.token\n      }\n      await dispatch(addNewComment(payload));\n      dispatch(getCommentsDataById(id)); \n      setComment('');      \n    } \n  }\n  \n  const handleDelete = deleteId => {\n    dispatch(removeComment({\n      id: deleteId, \n      username: auth.authState.userInfo.username,\n      token: auth.authState.token\n    }));\n    setTimeout(() => {\n      dispatch(getCommentsDataById(id)); \n    }, 100);\n  }\n\n  const handleChange = e => {\n    setComment(e.target.value);\n  }\n\n  return (\n    <>\n      <div className={classes.root}>\n        {commentList.data.length ? commentList.data.map(e => (\n          <div key={e.id} className={classes.deleteWrapper}>\n            <div className={classes.delete} onClick={() => handleDelete(e.id)}>x</div>{e.text}</div>\n        )) : ''}\n      </div>\n      <form className={classes.form} noValidate autoComplete=\"off\">              \n        <OutlinedInput \n          name=\"title\"\n          className={classes.input} \n          placeholder=\"New Comment\"\n          variant=\"outlined\" \n          autoFocus\n          value={comment}          \n          onChange={handleChange}\n        />        \n        <Button className={classes.button} variant=\"contained\" color=\"primary\" onClick={handleSubmit} >\n            Add\n        </Button>      \n      </form>\n    </>    \n  );\n}\n\nexport default BlogComments;"]},"metadata":{},"sourceType":"module"}