{"ast":null,"code":"var _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Profile.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Stepper, Step, StepLabel, Typography } from '@material-ui/core'; // import Stepper from '@material-ui/core/Stepper';\n// import Step from '@material-ui/core/Step';\n// import StepLabel from '@material-ui/core/StepLabel';\n// import Typography from '@material-ui/core/Typography';\n\nimport { useFormInput } from '../hooks/useFormInput';\nimport { AuthContext } from '../context/AuthContext';\nimport FormInputOutlined from '../components/FormInputOutlined';\nimport { patchUserInfo } from '../api/DogfriendsApi';\nimport { useHistory } from 'react-router-dom';\nimport { selectUser, getUserInfoData } from '../dogfriendsUserSlice';\nimport { useSelector, useDispatch } from 'react-redux';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    minHeight: '100vh',\n    maxWidth: '700px',\n    padding: '2px',\n    height: '100vh'\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff'\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px'\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px'\n  },\n  backButton: {\n    marginRight: theme.spacing(1)\n  },\n  completed: {\n    display: 'inline-block'\n  }\n}));\n\nconst Profile = () => {\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const usr = auth.authState.userInfo.username;\n    const token = auth.authState.token;\n    const payload = {\n      username: usr,\n      token: token\n    };\n    console.log('Profile useEffect payload', payload);\n    dispatch(getUserInfoData(payload)); // eslint-disable-next-line\n  }, [dispatch]);\n  const userList = useSelector(selectUser);\n  console.log('Profile userList', userList);\n  const history = useHistory();\n  const password = useFormInput('', '', 'password');\n  const first_name = useFormInput('first_name');\n  const last_name = useFormInput('last_name');\n  const photo_id = useFormInput('photo_id');\n  const email = useFormInput('email');\n  const city = useFormInput('city');\n  const state = useFormInput('state');\n  const country = useFormInput('country');\n\n  const handleSubmitPatch = async () => {\n    try {\n      const data = {\n        username: auth.authState.userInfo.username,\n        password: password.value,\n        first_name: first_name.value,\n        last_name: last_name.value,\n        email: email.value,\n        photo_id: photo_id.value,\n        city: city.value,\n        state: state.value,\n        country: country.value\n      };\n      console.log('handleSubmitPatch data', data);\n      console.log('handleSubmitPatch auth.authState', auth.authState); // data - user info collected from the form inputs\n      // The one column that will change is photo_url -> photo_id\n      // photo_url is inserted into table photos and we use the id of that record\n      // to refer to that photo\n\n      await patchUserInfo(auth.authState.token, data);\n      auth.setAuthState({\n        token: auth.authState.token,\n        userInfo: data\n      });\n      history.push(`/`);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const [activeStep, setActiveStep] = useState(0);\n  const steps = ['User Info', 'Contact', 'Confirm'];\n\n  const handleNext = () => {\n    if (activeStep === 0) {\n      if (password.value.length && first_name.value.length && last_name.value.length) {\n        setActiveStep(prevActiveStep => prevActiveStep + 1);\n      }\n    } else if (activeStep === 1) {\n      if (email.value.length && city.value.length && state.value.length && country.value.length) {\n        setActiveStep(prevActiveStep => prevActiveStep + 1);\n      }\n    } else {\n      handleSubmitPatch();\n    }\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, \"Your Profile\"));\n};\n\nexport default Profile;","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Profile.js"],"names":["React","useState","useContext","useEffect","makeStyles","Button","Stepper","Step","StepLabel","Typography","useFormInput","AuthContext","FormInputOutlined","patchUserInfo","useHistory","selectUser","getUserInfoData","useSelector","useDispatch","useStyles","theme","root","display","flexDirection","alignItems","justifyContent","width","minHeight","maxWidth","padding","height","form","backgroundColor","button","margin","err","color","fontSize","backButton","marginRight","spacing","completed","Profile","classes","auth","dispatch","usr","authState","userInfo","username","token","payload","console","log","userList","history","password","first_name","last_name","photo_id","email","city","state","country","handleSubmitPatch","data","value","setAuthState","push","error","activeStep","setActiveStep","steps","handleNext","length","prevActiveStep","handleBack","handleReset"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Stepper, Step, StepLabel, Typography } from '@material-ui/core';\n// import Stepper from '@material-ui/core/Stepper';\n// import Step from '@material-ui/core/Step';\n// import StepLabel from '@material-ui/core/StepLabel';\n// import Typography from '@material-ui/core/Typography';\nimport { useFormInput } from '../hooks/useFormInput';\nimport { AuthContext } from '../context/AuthContext';\nimport FormInputOutlined from '../components/FormInputOutlined';\nimport { patchUserInfo } from '../api/DogfriendsApi';\nimport { useHistory } from 'react-router-dom';\n\nimport { selectUser, getUserInfoData } from '../dogfriendsUserSlice';\nimport { useSelector, useDispatch } from 'react-redux';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    minHeight: '100vh',\n    maxWidth: '700px',\n    padding: '2px',\n    height: '100vh',\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px',\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px',\n  },\n  backButton: {\n    marginRight: theme.spacing(1),\n  },\n  completed: {\n    display: 'inline-block',\n  },\n\n}));\n\n\nconst Profile = () => {\n  const classes = useStyles();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const usr = auth.authState.userInfo.username;\n    const token = auth.authState.token;\n    const payload = {\n      username: usr,\n      token: token\n    }\n    console.log('Profile useEffect payload',payload)\n    dispatch(getUserInfoData(payload));\n    // eslint-disable-next-line\n  }, [dispatch]);\n  const userList = useSelector(selectUser);\n  console.log('Profile userList',userList)\n  const history = useHistory();  \n  const password = useFormInput('', '', 'password');\n  const first_name = useFormInput('first_name');\n  const last_name = useFormInput('last_name');\n  const photo_id = useFormInput('photo_id');\n  const email = useFormInput('email');\n  const city = useFormInput('city');\n  const state = useFormInput('state');\n  const country = useFormInput('country');\n\n  const handleSubmitPatch = async () => {\n    try {\n      const data = {\n        username: auth.authState.userInfo.username,\n        password: password.value, \n        first_name: first_name.value, \n        last_name: last_name.value, \n        email: email.value,\n        photo_id: photo_id.value,\n        city: city.value, \n        state: state.value, \n        country: country.value\n      }\n      console.log('handleSubmitPatch data',data)\n      console.log('handleSubmitPatch auth.authState',auth.authState)\n      // data - user info collected from the form inputs\n      // The one column that will change is photo_url -> photo_id\n      // photo_url is inserted into table photos and we use the id of that record\n      // to refer to that photo\n      await patchUserInfo(auth.authState.token, data);\n      auth.setAuthState({\n        token: auth.authState.token,\n        userInfo: data\n      });\n      history.push(`/`);\n    } catch (error) {\n      console.log(error)\n    }    \n  }\n  \n  const [activeStep, setActiveStep] = useState(0);\n  const steps = ['User Info', 'Contact', 'Confirm'];\n\n  const handleNext = () => {\n    if(activeStep === 0) {\n      if(password.value.length && first_name.value.length && last_name.value.length) {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      }\n    } else if(activeStep === 1) {\n      if(email.value.length && city.value.length && state.value.length && country.value.length) {\n        setActiveStep((prevActiveStep) => prevActiveStep + 1);\n      }\n    } else {\n      handleSubmitPatch();\n    }    \n  };\n\n  const handleBack = () => {\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  const handleReset = () => {\n    setActiveStep(0);\n  };\n  \n  return (\n    <>\n    <h1>Your Profile</h1>\n    </>\n  );\n}\nexport default Profile;"]},"metadata":{},"sourceType":"module"}