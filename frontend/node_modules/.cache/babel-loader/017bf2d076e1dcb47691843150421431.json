{"ast":null,"code":"var _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/components/UploadPhoto.js\";\nimport React, { useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { makeStyles } from '@material-ui/core'; // import {\n//   postPhotoNew\n// } from '../dogfriendsPhotosSlice';\n\nimport axios from 'axios';\nconst useStyles = makeStyles(theme => ({\n  dropzone: {\n    height: '8rem',\n    margin: '1rem',\n    padding: '1rem',\n    border: '2px dashed salmon',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '2rem',\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    active: {\n      border: '2px solid rebeccapurple'\n    }\n  }\n}));\nconst BASE_URL = process.env.REACT_APP_CLOUDINARY_BASE_URL;\n\nconst request = async (endpoint, paramsOrData = {}, verb = 'get') => {\n  console.log('API Call:', endpoint, paramsOrData, verb);\n\n  try {\n    const res = await axios({\n      method: verb,\n      url: `${BASE_URL}${endpoint}`,\n      [verb === \"get\" ? \"params\" : \"data\"]: paramsOrData\n    });\n    return res; // axios sends query string data via the \"params\" key,\n    // and request body data via the \"data\" key,\n    // so the key we need depends on the HTTP verb\n  } catch (err) {\n    let message = err.response ? err.response.data.message : err;\n    throw Array.isArray(message) ? message : [message];\n  }\n};\n\nconst postNewPhoto = async acceptedFiles => {\n  console.log('postNewPhoto');\n  const url = process.env.REACT_APP_CLOUDINARY_BASE_URL + 'upload';\n  acceptedFiles.forEach(async acceptedFile => {\n    const formData = new FormData();\n    formData.append('file', acceptedFile);\n    formData.append('upload_preset', process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);\n    const response = await request(url, formData, 'post');\n    const data = await response.json();\n    return data; // for dev we will just return this url so we don't keep making calls to Cloudinary API\n    // return \"http://res.cloudinary.com/dsxlpdoea/image/upload/v1605993605/photo-1544568100-847a948585b9_evaw8c.jpg\";\n  });\n};\n\nexport default function UploadPhoto() {\n  const classes = useStyles();\n  const onDrop = useCallback(async acceptedFiles => {\n    console.log('UploadPhoto acceptedFiles', acceptedFiles);\n    const response = await postNewPhoto(acceptedFiles); // const response = await postPhotoNew(acceptedFiles);\n    // const data = await response.json();\n\n    console.log('UploadPhoto response', response);\n  }, []);\n  const {\n    getRootProps,\n    getInputProps\n  } = useDropzone({\n    onDrop,\n    accepts: 'image/*',\n    multiple: false\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n    className: classes.dropzone\n  }, getRootProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  })), \"Drop Zone\"));\n}","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/components/UploadPhoto.js"],"names":["React","useCallback","useDropzone","makeStyles","axios","useStyles","theme","dropzone","height","margin","padding","border","display","justifyContent","alignItems","fontSize","fontWeight","cursor","active","BASE_URL","process","env","REACT_APP_CLOUDINARY_BASE_URL","request","endpoint","paramsOrData","verb","console","log","res","method","url","err","message","response","data","Array","isArray","postNewPhoto","acceptedFiles","forEach","acceptedFile","formData","FormData","append","REACT_APP_CLOUDINARY_UPLOAD_PRESET","json","UploadPhoto","classes","onDrop","getRootProps","getInputProps","accepts","multiple"],"mappings":"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","sourcesContent":["import React , { useCallback } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { makeStyles } from '@material-ui/core';\n// import {\n//   postPhotoNew\n// } from '../dogfriendsPhotosSlice';\n\nimport axios from 'axios';\n\n\nconst useStyles = makeStyles((theme) => ({\n  dropzone: {\n    height: '8rem',\n    margin: '1rem',\n    padding: '1rem',\n    border: '2px dashed salmon',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: '2rem',\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    active: {\n      border: '2px solid rebeccapurple',\n    },\n  },\n  \n}));\n\n\nconst BASE_URL = process.env.REACT_APP_CLOUDINARY_BASE_URL;\n\nconst request = async (endpoint, paramsOrData = {}, verb = 'get') => {\n\n  console.log('API Call:', endpoint, paramsOrData, verb);\n  try {\n    const res = await axios({\n      method: verb,\n      url: `${BASE_URL}${endpoint}`,\n      [verb === \"get\" ? \"params\" : \"data\"]: paramsOrData});\n    \n    return res;\n      // axios sends query string data via the \"params\" key,\n      // and request body data via the \"data\" key,\n      // so the key we need depends on the HTTP verb\n  }catch(err) {\n    let message = err.response ? err.response.data.message : err;\n    throw Array.isArray(message) ? message : [message];\n  }\n}\nconst postNewPhoto = async (acceptedFiles) => {\n  console.log('postNewPhoto')\n  const url = process.env.REACT_APP_CLOUDINARY_BASE_URL+'upload';\n\n  acceptedFiles.forEach(async (acceptedFile) => {\n    const formData = new FormData();\n    formData.append('file', acceptedFile);\n    formData.append('upload_preset', process.env.REACT_APP_CLOUDINARY_UPLOAD_PRESET);\n\n    const response = await request(url, formData, 'post');\n    const data = await response.json();      \n    return data;\n\n    // for dev we will just return this url so we don't keep making calls to Cloudinary API\n    // return \"http://res.cloudinary.com/dsxlpdoea/image/upload/v1605993605/photo-1544568100-847a948585b9_evaw8c.jpg\";\n\n  });\n}\n\n\n\nexport default function UploadPhoto() {\n  const classes = useStyles();\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    console.log('UploadPhoto acceptedFiles',acceptedFiles)\n    const response = await postNewPhoto(acceptedFiles);\n    // const response = await postPhotoNew(acceptedFiles);\n    // const data = await response.json();\n\n    console.log('UploadPhoto response',response)   \n    \n  }, []);\n\n  const {getRootProps, getInputProps} = useDropzone({\n    onDrop, \n    accepts: 'image/*',\n    multiple: false,\n  });\n\n  return (\n    <>\n      <div className={classes.dropzone} {...getRootProps()}>\n        <input {...getInputProps()} />\n        Drop Zone\n      </div>\n    </>\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}