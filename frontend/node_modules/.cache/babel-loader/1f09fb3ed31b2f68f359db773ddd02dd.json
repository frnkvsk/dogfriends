{"ast":null,"code":"import * as AWS from 'aws-sdk';\nimport { v4 as uuid } from 'uuid';\nconst BUCKET_NAME = 'dogfriends';\nconst s3 = new AWS.S3({\n  region: 'us-west-2',\n  secretAccessKey: 'L2jl2AOgtKyJw1EN9xW/6gvOpR2ZTVzOima3afOo',\n  accessKeyId: 'AKIAUCUWDY6W57HR5TNU'\n});\n\nconst uploadToS3 = async data => {\n  console.log('DogfriendsPhotoApi uploadToS3 BUCKET_NAME', BUCKET_NAME);\n  console.log('DogfriendsPhotoApi uploadToS3 data', data);\n  let mime = data.name.slice(data.name.lastIndexOf('.'), data.name.length);\n  const name = uuid() + '.' + mime; // await s3.putObject({\n  //   Key: name,\n  //   Bucket: BUCKET_NAME,\n  //   ContentType: `image/${mime}`,\n  //   Body: data,\n  //   ACL: 'public-read',\n  // }).promise(); \n\n  return name;\n};\n\nconst postNewPhoto = async data => {\n  try {\n    const url = await uploadToS3(data);\n    console.log('url', url);\n    return url;\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nexport { postNewPhoto };","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/api/DogfriendsPhotosApi.js"],"names":["AWS","v4","uuid","BUCKET_NAME","s3","S3","region","secretAccessKey","accessKeyId","uploadToS3","data","console","log","mime","name","slice","lastIndexOf","length","postNewPhoto","url","error"],"mappings":"AAAA,OAAO,KAAKA,GAAZ,MAAqB,SAArB;AAEA,SAASC,EAAE,IAAIC,IAAf,QAA2B,MAA3B;AAEA,MAAMC,WAAW,GAAG,YAApB;AAEA,MAAMC,EAAE,GAAG,IAAIJ,GAAG,CAACK,EAAR,CAAW;AACpBC,EAAAA,MAAM,EAAE,WADY;AAEpBC,EAAAA,eAAe,EAAE,0CAFG;AAGpBC,EAAAA,WAAW,EAAE;AAHO,CAAX,CAAX;;AAMA,MAAMC,UAAU,GAAG,MAAOC,IAAP,IAAgB;AACjCC,EAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ,EAAwDT,WAAxD;AACAQ,EAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAAiDF,IAAjD;AACA,MAAIG,IAAI,GAAGH,IAAI,CAACI,IAAL,CAAUC,KAAV,CAAgBL,IAAI,CAACI,IAAL,CAAUE,WAAV,CAAsB,GAAtB,CAAhB,EAA4CN,IAAI,CAACI,IAAL,CAAUG,MAAtD,CAAX;AACA,QAAMH,IAAI,GAAGZ,IAAI,KAAK,GAAT,GAAeW,IAA5B,CAJiC,CAMjC;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAAOC,IAAP;AACD,CAdD;;AAgBA,MAAMI,YAAY,GAAG,MAAOR,IAAP,IAAgB;AACnC,MAAI;AACF,UAAMS,GAAG,GAAG,MAAMV,UAAU,CAACC,IAAD,CAA5B;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBO,GAAlB;AACA,WAAOA,GAAP;AACD,GAJD,CAIE,OAAOC,KAAP,EAAc;AACdT,IAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;AACD;AACF,CARD;;AAWA,SACEF,YADF","sourcesContent":["import * as AWS from 'aws-sdk';\n\nimport { v4 as uuid } from 'uuid';\n\nconst BUCKET_NAME = 'dogfriends';\n\nconst s3 = new AWS.S3({\n  region: 'us-west-2',\n  secretAccessKey: 'L2jl2AOgtKyJw1EN9xW/6gvOpR2ZTVzOima3afOo',\n  accessKeyId: 'AKIAUCUWDY6W57HR5TNU',\n});\n\nconst uploadToS3 = async (data) => {\n  console.log('DogfriendsPhotoApi uploadToS3 BUCKET_NAME',BUCKET_NAME)\n  console.log('DogfriendsPhotoApi uploadToS3 data',data)\n  let mime = data.name.slice(data.name.lastIndexOf('.'), data.name.length);\n  const name = uuid() + '.' + mime;\n \n  // await s3.putObject({\n  //   Key: name,\n  //   Bucket: BUCKET_NAME,\n  //   ContentType: `image/${mime}`,\n  //   Body: data,\n  //   ACL: 'public-read',\n  // }).promise(); \n  return name;\n}\n\nconst postNewPhoto = async (data) => {\n  try {\n    const url = await uploadToS3(data);\n    console.log('url',url)\n    return url;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\nexport {\n  postNewPhoto,\n}"]},"metadata":{},"sourceType":"module"}