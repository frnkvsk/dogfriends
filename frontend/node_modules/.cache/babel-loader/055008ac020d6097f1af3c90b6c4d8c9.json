{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Login.js\",\n    _s = $RefreshSig$();\n\n/** Login and Signup */\nimport React, { useState, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab'; // import { Container, FormHelperText, Box, Button } from '@material-ui/core';\n// import OutlinedInput from '@material-ui/core/OutlinedInput';\n// import { useHistory } from \"react-router-dom\";\n// import { login, signup, getUserInfo } from '../api/DogfriendsApi';\n// import { useFormInput } from '../hooks/useFormInput';\n\nimport { AuthContext } from '../context/AuthContext';\nimport { useDispatch } from 'react-redux';\nimport SignupForm from '../components/SignupForm';\nimport LoginForm from '../components/LoginForm';\nimport { signUpSlice, loginSlice } from '../dogfriendsUserSlice';\n\nfunction LinkTab(props) {\n  return /*#__PURE__*/_jsxDEV(Tab, {\n    component: \"a\",\n    onClick: event => {\n      event.preventDefault();\n    },\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 5\n  }, this);\n}\n\n_c = LinkTab;\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    maxWidth: '500px',\n    paddingTop: '30px',\n    maxHeight: '90vh',\n    overflow: 'hidden'\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff'\n  },\n  label: {\n    fontSize: '18px',\n    fontWeight: 'bold',\n    width: '90%',\n    margin: '10px 20px 0 20px'\n  },\n  input: {\n    width: '90%',\n    margin: '0 20px 0 20px'\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px'\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px'\n  }\n}));\nexport default function Login() {\n  _s();\n\n  const classes = useStyles(); // const history = useHistory();\n\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const [loginType, setValue] = useState(\"login\");\n\n  const handleChange = (e, newValue) => {\n    setValue(newValue);\n  };\n\n  console.log('SignupForm auth', auth);\n\n  const handleLogin = async ({\n    username,\n    password\n  }) => {\n    try {\n      // verify username and password are correct\n      // const resp = await login(username.value, password.value);\n      const resp = await dispatch(loginSlice({\n        username: username,\n        password: password\n      }));\n      console.log('LoginForm handleSubmitForm resp', resp); // if logged in, use resp.token to get user information\n\n      const userInfo = await dispatch(getUserInfoSlice({\n        token: resp.payload.token,\n        username: username\n      })); // console.log('LoginForm handleSubmitLogin userInfo',userInfo)\n\n      auth.setAuthState({\n        userInfo: userInfo.payload.user,\n        token: resp.payload.token\n      });\n      history.push(`/`);\n    } catch (error) {\n      setErrorMessage(true);\n      console.log(error);\n    }\n  };\n\n  const handleSignup = async ({\n    username,\n    password,\n    first_name,\n    last_name,\n    email,\n    photo_id,\n    city,\n    state,\n    country\n  }) => {\n    const userInfo = {\n      username,\n      password,\n      first_name,\n      last_name,\n      email,\n      photo_id,\n      city,\n      state,\n      country\n    };\n    userInfo._token = auth.authState.token; // userInfo.username = auth.authState.userInfo.username;\n\n    console.log('SignupForm userInfo', userInfo);\n    return await dispatch(signUpSlice(userInfo));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        variant: \"fullWidth\",\n        value: loginType,\n        onChange: handleChange,\n        \"aria-label\": \"nav tabs example\",\n        children: [/*#__PURE__*/_jsxDEV(LinkTab, {\n          label: \"Login\",\n          value: \"login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LinkTab, {\n          label: \"Sign up\",\n          value: \"signup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this), loginType === 'login' ? /*#__PURE__*/_jsxDEV(LoginForm, {\n      handleLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }, this) : /*#__PURE__*/_jsxDEV(SignupForm, {\n      handleSubmit: handleSignup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 74\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"h9PoG3TIRSTUo29EtOATya2p7Pw=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c2 = Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LinkTab\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Login.js"],"names":["React","useState","useContext","makeStyles","AppBar","Tabs","Tab","AuthContext","useDispatch","SignupForm","LoginForm","signUpSlice","loginSlice","LinkTab","props","event","preventDefault","useStyles","theme","root","display","flexDirection","alignItems","justifyContent","width","maxWidth","paddingTop","maxHeight","overflow","form","backgroundColor","label","fontSize","fontWeight","margin","input","button","err","color","Login","classes","auth","dispatch","loginType","setValue","handleChange","e","newValue","console","log","handleLogin","username","password","resp","userInfo","getUserInfoSlice","token","payload","setAuthState","user","history","push","error","setErrorMessage","handleSignup","first_name","last_name","email","photo_id","city","state","country","_token","authState"],"mappings":"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","sourcesContent":["/** Login and Signup */\nimport React, { useState, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n// import { Container, FormHelperText, Box, Button } from '@material-ui/core';\n// import OutlinedInput from '@material-ui/core/OutlinedInput';\n// import { useHistory } from \"react-router-dom\";\n// import { login, signup, getUserInfo } from '../api/DogfriendsApi';\n// import { useFormInput } from '../hooks/useFormInput';\nimport { AuthContext } from '../context/AuthContext';\nimport { useDispatch } from 'react-redux';\nimport SignupForm from '../components/SignupForm';\nimport LoginForm from '../components/LoginForm';\nimport { signUpSlice, loginSlice } from '../dogfriendsUserSlice';\n\nfunction LinkTab(props) {\n  return (\n    <Tab\n      component=\"a\"\n      onClick={(event) => {\n        event.preventDefault();\n      }}\n      {...props}\n    />\n  );\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    maxWidth: '500px',\n    paddingTop: '30px',\n    maxHeight: '90vh',   \n    overflow: 'hidden'\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n  },\n  label: {\n    fontSize: '18px',\n    fontWeight: 'bold',\n    width: '90%',\n    margin: '10px 20px 0 20px',\n  },\n  input: {\n    width: '90%',\n    margin: '0 20px 0 20px',\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px',\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px',\n  }\n\n}));\n\nexport default function Login() {\n  const classes = useStyles();\n  // const history = useHistory();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const [loginType, setValue] = useState(\"login\");\n\n  const handleChange = (e, newValue) => {\n    setValue(newValue);\n  }\n\n  console.log('SignupForm auth',auth)\n\n  const handleLogin = async ({\n    username,\n    password\n  }) => {\n    try {\n      // verify username and password are correct\n      // const resp = await login(username.value, password.value);\n      const resp = await dispatch(loginSlice({\n        username: username,\n        password: password\n      }));\n      console.log('LoginForm handleSubmitForm resp',resp)\n      // if logged in, use resp.token to get user information\n      const userInfo = await dispatch(getUserInfoSlice({\n        token: resp.payload.token, \n        username: username\n      }));\n\n      // console.log('LoginForm handleSubmitLogin userInfo',userInfo)\n\n      auth.setAuthState({\n        userInfo: userInfo.payload.user,\n        token: resp.payload.token,\n      });\n      history.push(`/`);\n    } catch (error) {\n      setErrorMessage(true);\n      console.log(error)\n    }\n  }\n  const handleSignup = async ({\n    username,\n    password,\n    first_name,\n    last_name, \n    email, \n    photo_id,\n    city, \n    state, \n    country \n    }) => {\n    const userInfo = {\n      username,\n      password,\n      first_name,\n      last_name, \n      email, \n      photo_id,\n      city, \n      state, \n      country \n    }\n    userInfo._token = auth.authState.token;\n    // userInfo.username = auth.authState.userInfo.username;\n    console.log('SignupForm userInfo',userInfo)\n    return await dispatch(signUpSlice(userInfo));\n  }\n  \n\n  return (\n    \n    <div className={classes.root}>\n      {/* <Box className={classes.err} \n        component=\"span\" \n        display={errorMessage ? 'block' : 'none'}\n        >\n          Error: Invalid credentials\n      </Box> */}\n      <AppBar position=\"static\">\n        <Tabs\n          variant=\"fullWidth\"\n          value={loginType}\n          onChange={handleChange}\n          aria-label=\"nav tabs example\"\n        >\n          <LinkTab label=\"Login\" value=\"login\" />\n          <LinkTab label=\"Sign up\" value=\"signup\" />\n        </Tabs>\n      </AppBar>\n      \n      { loginType === 'login' ? <LoginForm handleLogin={handleLogin}/> : <SignupForm handleSubmit={handleSignup} /> }\n    </div>\n  );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}