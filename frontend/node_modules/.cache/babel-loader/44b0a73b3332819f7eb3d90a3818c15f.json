{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Login.js\",\n    _s = $RefreshSig$();\n\n/** Login and Signup */\nimport React, { useState, useContext } from 'react';\nimport { makeStyles, AppBar, Tabs, Tab, Divider } from '@material-ui/core'; // import { Container, FormHelperText, Box, Button } from '@material-ui/core';\n// import OutlinedInput from '@material-ui/core/OutlinedInput';\n// import { useHistory } from 'react-router-dom';\n// import { login, signup, getUserInfo } from '../api/DogfriendsApi';\n// import { useFormInput } from '../hooks/useFormInput';\n\nimport { AuthContext } from '../context/AuthContext';\nimport { useDispatch } from 'react-redux';\nimport SignupForm from '../components/SignupForm';\nimport LoginForm from '../components/LoginForm';\nimport { checkUsernameSlice, signUpSlice, loginSlice, getUserInfoSlice } from '../dogfriendsUserSlice'; // function LinkTab(props) {\n//   return (\n//     <Tab\n//       component='a'\n//       onClick={(event) => {\n//         event.preventDefault();\n//       }}\n//       {...props}\n//     />\n//   );\n// }\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    maxWidth: '500px',\n    paddingTop: '30px',\n    overflow: 'hidden'\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff'\n  },\n  label: {\n    fontSize: '18px',\n    fontWeight: 'bold',\n    width: '90%',\n    margin: '10px 20px 0 20px'\n  },\n  input: {\n    width: '90%',\n    margin: '0 20px 0 20px'\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px'\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px'\n  }\n}));\n\nconst MDivider = () => /*#__PURE__*/_jsxDEV(Divider, {\n  orientation: \"vertical\",\n  light: true,\n  flexItem: \"true\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 76,\n  columnNumber: 3\n}, this);\n\n_c = MDivider;\nexport default function Login() {\n  _s();\n\n  const classes = useStyles(); // const history = useHistory();\n\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const [loginType, setValue] = useState('login');\n\n  const handleChange = (e, newValue) => {\n    setValue(newValue);\n  };\n\n  console.log('Login auth', auth);\n\n  const handleLogin = async ({\n    username,\n    password\n  }) => {\n    try {\n      // verify username and password are correct\n      // const resp = await login(username.value, password.value);\n      const resp = await dispatch(loginSlice({\n        username: username,\n        password: password\n      }));\n      console.log('LoginForm handleSubmitForm resp', resp); // if logged in, use resp.token to get user information\n\n      const userInfo = await dispatch(getUserInfoSlice({\n        token: resp.payload.token,\n        username: username\n      })); // console.log('LoginForm handleSubmitLogin userInfo',userInfo)\n\n      auth.setAuthState({\n        userInfo: userInfo.payload.user,\n        token: resp.payload.token\n      }); // history.push(`/`);\n\n      return false;\n    } catch (error) {\n      // setErrorMessage(true);\n      console.log(error);\n      return false;\n    }\n  }; // check if username is available\n\n\n  const handleCheckUsernameAvailability = async ({\n    username\n  }) => {\n    // console.log('Login handlePreSignup username',username)\n    if (username.length) {\n      return await dispatch(checkUsernameSlice({\n        username\n      }));\n    }\n  };\n\n  const handleSignup = async ({\n    username,\n    password,\n    first_name,\n    last_name,\n    email\n  }) => {\n    const userInfo = {\n      username,\n      password,\n      first_name,\n      last_name,\n      email\n    }; // userInfo._token = auth.authState.token;\n    // userInfo.username = auth.authState.userInfo.username;\n\n    console.log('SignupForm userInfo', userInfo);\n    return await dispatch(signUpSlice(userInfo));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      children: /*#__PURE__*/_jsxDEV(Tabs, {\n        variant: \"fullWidth\",\n        value: loginType,\n        onChange: handleChange,\n        \"aria-label\": \"nav tabs example\",\n        TabIndicatorProps: {\n          style: {\n            backgroundColor: 'secondary',\n            height: '5px' // border: '1px solid white',\n            // opacity: 0.9,\n\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Login\",\n          value: \"login\",\n          icon: /*#__PURE__*/_jsxDEV(MDivider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Tab, {\n          label: \"Sign up\",\n          value: \"signup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), loginType === 'login' ? /*#__PURE__*/_jsxDEV(LoginForm, {\n      handleLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(SignupForm, {\n      handlePreSignup: handleCheckUsernameAvailability,\n      handleSubmit: handleSignup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"OuYF1A17xqQQ3bNRye6SfLyZfKM=\", false, function () {\n  return [useStyles, useDispatch];\n});\n\n_c2 = Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MDivider\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/src/features/dogfriends/pages/Login.js"],"names":["React","useState","useContext","makeStyles","AppBar","Tabs","Tab","Divider","AuthContext","useDispatch","SignupForm","LoginForm","checkUsernameSlice","signUpSlice","loginSlice","getUserInfoSlice","useStyles","theme","root","display","flexDirection","alignItems","justifyContent","width","maxWidth","paddingTop","overflow","form","backgroundColor","label","fontSize","fontWeight","margin","input","button","err","color","MDivider","Login","classes","auth","dispatch","loginType","setValue","handleChange","e","newValue","console","log","handleLogin","username","password","resp","userInfo","token","payload","setAuthState","user","error","handleCheckUsernameAvailability","length","handleSignup","first_name","last_name","email","style","height"],"mappings":"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","sourcesContent":["/** Login and Signup */\nimport React, { useState, useContext } from 'react';\n\nimport {\n  makeStyles,\n  AppBar,\n  Tabs,\n  Tab,\n  Divider\n} from '@material-ui/core';\n// import { Container, FormHelperText, Box, Button } from '@material-ui/core';\n// import OutlinedInput from '@material-ui/core/OutlinedInput';\n// import { useHistory } from 'react-router-dom';\n// import { login, signup, getUserInfo } from '../api/DogfriendsApi';\n// import { useFormInput } from '../hooks/useFormInput';\nimport { AuthContext } from '../context/AuthContext';\nimport { useDispatch } from 'react-redux';\nimport SignupForm from '../components/SignupForm';\nimport LoginForm from '../components/LoginForm';\nimport { \n  checkUsernameSlice,\n  signUpSlice, \n  loginSlice, \n  getUserInfoSlice \n} from '../dogfriendsUserSlice';\n\n// function LinkTab(props) {\n//   return (\n//     <Tab\n//       component='a'\n//       onClick={(event) => {\n//         event.preventDefault();\n//       }}\n//       {...props}\n//     />\n//   );\n// }\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    width: '100%',\n    maxWidth: '500px',\n    paddingTop: '30px',\n    overflow: 'hidden'\n  },\n  form: {\n    width: '100%',\n    backgroundColor: '#ffffff',\n  },\n  label: {\n    fontSize: '18px',\n    fontWeight: 'bold',\n    width: '90%',\n    margin: '10px 20px 0 20px',\n  },\n  input: {\n    width: '90%',\n    margin: '0 20px 0 20px',\n  },\n  button: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    margin: '10px 20px 15px',\n  },\n  err: {\n    color: '#ff1744',\n    fontSize: '24px',\n  },\n\n}));\nconst MDivider = () => \n  <Divider \n    orientation='vertical' \n    light={true}\n    flexItem='true'\n  />;\n\nexport default function Login() {\n  const classes = useStyles();\n  // const history = useHistory();\n  const auth = useContext(AuthContext);\n  const dispatch = useDispatch();\n  const [loginType, setValue] = useState('login');\n\n  const handleChange = (e, newValue) => {\n    setValue(newValue);\n  }\n\n  console.log('Login auth',auth)\n\n  const handleLogin = async ({\n    username,\n    password\n  }) => {\n    try {\n      // verify username and password are correct\n      // const resp = await login(username.value, password.value);\n      const resp = await dispatch(loginSlice({\n        username: username,\n        password: password\n      }));\n      console.log('LoginForm handleSubmitForm resp',resp)\n      // if logged in, use resp.token to get user information\n      const userInfo = await dispatch(getUserInfoSlice({\n        token: resp.payload.token, \n        username: username\n      }));\n\n      // console.log('LoginForm handleSubmitLogin userInfo',userInfo)\n\n      auth.setAuthState({\n        userInfo: userInfo.payload.user,\n        token: resp.payload.token,\n      });\n      // history.push(`/`);\n      return false;\n    } catch (error) {\n      // setErrorMessage(true);\n      console.log(error)\n      return false;\n    }\n  }\n\n  // check if username is available\n  const handleCheckUsernameAvailability = async ({username}) => {\n    // console.log('Login handlePreSignup username',username)\n    if(username.length) {\n      return await dispatch(checkUsernameSlice({username}));\n    }    \n  }\n\n  \n  const handleSignup = async ({\n    username,\n    password, \n    first_name,\n    last_name,\n    email\n    }) => {\n    const userInfo = {\n      username,\n      password,\n      first_name,\n      last_name, \n      email,\n    }\n    // userInfo._token = auth.authState.token;\n    // userInfo.username = auth.authState.userInfo.username;\n    console.log('SignupForm userInfo',userInfo)\n    return await dispatch(signUpSlice(userInfo));\n  }\n  \n\n  return (\n    \n    <div className={classes.root}>\n      <AppBar position='static'>\n        <Tabs\n          variant='fullWidth'\n          value={loginType}\n          onChange={handleChange}\n          aria-label='nav tabs example'\n          TabIndicatorProps={\n            { \n              style: {\n                backgroundColor: 'secondary', \n                height: '5px',\n                // border: '1px solid white',\n                // opacity: 0.9,\n              }\n            }\n          }   \n        >\n          <Tab label='Login' value='login' icon={<MDivider />} />\n          {/* <MDivider \n            orientation='vertical' \n            light={true}\n            flexItem='true'\n            // variant='middle'\n            /> */}\n          <Tab label='Sign up' value='signup' />\n          {/* <LinkTab label='Login' value='login' />\n          <LinkTab label='Sign up' value='signup' /> */}\n        </Tabs>\n      </AppBar>\n      \n      { loginType === 'login' ? \n        <LoginForm handleLogin={handleLogin}/> : \n        <SignupForm \n          handlePreSignup={handleCheckUsernameAvailability}\n          handleSubmit={handleSignup} \n        /> \n      }\n    </div>\n  );\n}\n\n\n"]},"metadata":{},"sourceType":"module"}