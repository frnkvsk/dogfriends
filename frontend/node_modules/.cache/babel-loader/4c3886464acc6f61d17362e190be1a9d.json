{"ast":null,"code":"'use strict';\n\nconst fs = require('fs');\n\nconst os = require('os');\n\nconst path = require('path');\n\nconst spawnSync = require('child_process').spawnSync;\n\nconst semver = require('semver');\n\nconst platform = require('./platform');\n\nconst env = process.env;\n\nconst minimumLibvipsVersionLabelled = env.npm_package_config_libvips ||\n/* istanbul ignore next */\nrequire('../package.json').config.libvips;\n\nconst minimumLibvipsVersion = semver.coerce(minimumLibvipsVersionLabelled).version;\nconst spawnSyncOptions = {\n  encoding: 'utf8',\n  shell: true\n};\n\nconst mkdirSync = function (dirPath) {\n  try {\n    fs.mkdirSync(dirPath);\n  } catch (err) {\n    /* istanbul ignore if */\n    if (err.code !== 'EEXIST') {\n      throw err;\n    }\n  }\n};\n\nconst cachePath = function () {\n  const npmCachePath = env.npm_config_cache || (\n  /* istanbul ignore next */\n  env.APPDATA ? path.join(env.APPDATA, 'npm-cache') : path.join(os.homedir(), '.npm'));\n  mkdirSync(npmCachePath);\n  const libvipsCachePath = path.join(npmCachePath, '_libvips');\n  mkdirSync(libvipsCachePath);\n  return libvipsCachePath;\n};\n\nconst globalLibvipsVersion = function () {\n  if (process.platform !== 'win32') {\n    const globalLibvipsVersion = spawnSync(`PKG_CONFIG_PATH=\"${pkgConfigPath()}\" pkg-config --modversion vips-cpp`, spawnSyncOptions).stdout;\n    /* istanbul ignore next */\n\n    return (globalLibvipsVersion || '').trim();\n  } else {\n    return '';\n  }\n};\n\nconst hasVendoredLibvips = function () {\n  const currentPlatformId = platform();\n  const vendorPath = path.join(__dirname, '..', 'vendor', minimumLibvipsVersion);\n  let vendorPlatformId;\n\n  try {\n    vendorPlatformId = require(path.join(vendorPath, 'platform.json'));\n  } catch (err) {}\n  /* istanbul ignore else */\n\n\n  if (vendorPlatformId) {\n    /* istanbul ignore else */\n    if (currentPlatformId === vendorPlatformId) {\n      return true;\n    } else {\n      throw new Error(`'${vendorPlatformId}' binaries cannot be used on the '${currentPlatformId}' platform. Please remove the 'node_modules/sharp' directory and run 'npm install' on the '${currentPlatformId}' platform.`);\n    }\n  } else {\n    return false;\n  }\n};\n\nconst pkgConfigPath = function () {\n  if (process.platform !== 'win32') {\n    const brewPkgConfigPath = spawnSync('which brew >/dev/null 2>&1 && eval $(brew --env) && echo $PKG_CONFIG_LIBDIR', spawnSyncOptions).stdout || '';\n    return [brewPkgConfigPath.trim(), env.PKG_CONFIG_PATH, '/usr/local/lib/pkgconfig', '/usr/lib/pkgconfig'].filter(function (p) {\n      return !!p;\n    }).join(':');\n  } else {\n    return '';\n  }\n};\n\nconst useGlobalLibvips = function () {\n  if (Boolean(env.SHARP_IGNORE_GLOBAL_LIBVIPS) === true) {\n    return false;\n  }\n\n  const globalVipsVersion = globalLibvipsVersion();\n  return !!globalVipsVersion &&\n  /* istanbul ignore next */\n  semver.gte(globalVipsVersion, minimumLibvipsVersion);\n};\n\nmodule.exports = {\n  minimumLibvipsVersion,\n  minimumLibvipsVersionLabelled,\n  cachePath,\n  globalLibvipsVersion,\n  hasVendoredLibvips,\n  pkgConfigPath,\n  useGlobalLibvips,\n  mkdirSync\n};","map":{"version":3,"sources":["/home/fv/js/capstone2/dogfriends/frontend/node_modules/sharp/lib/libvips.js"],"names":["fs","require","os","path","spawnSync","semver","platform","env","process","minimumLibvipsVersionLabelled","npm_package_config_libvips","config","libvips","minimumLibvipsVersion","coerce","version","spawnSyncOptions","encoding","shell","mkdirSync","dirPath","err","code","cachePath","npmCachePath","npm_config_cache","APPDATA","join","homedir","libvipsCachePath","globalLibvipsVersion","pkgConfigPath","stdout","trim","hasVendoredLibvips","currentPlatformId","vendorPath","__dirname","vendorPlatformId","Error","brewPkgConfigPath","PKG_CONFIG_PATH","filter","p","useGlobalLibvips","Boolean","SHARP_IGNORE_GLOBAL_LIBVIPS","globalVipsVersion","gte","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMG,SAAS,GAAGH,OAAO,CAAC,eAAD,CAAP,CAAyBG,SAA3C;;AACA,MAAMC,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMK,QAAQ,GAAGL,OAAO,CAAC,YAAD,CAAxB;;AAEA,MAAMM,GAAG,GAAGC,OAAO,CAACD,GAApB;;AACA,MAAME,6BAA6B,GAAGF,GAAG,CAACG,0BAAJ;AAAkC;AACtET,OAAO,CAAC,iBAAD,CAAP,CAA2BU,MAA3B,CAAkCC,OADpC;;AAEA,MAAMC,qBAAqB,GAAGR,MAAM,CAACS,MAAP,CAAcL,6BAAd,EAA6CM,OAA3E;AAEA,MAAMC,gBAAgB,GAAG;AACvBC,EAAAA,QAAQ,EAAE,MADa;AAEvBC,EAAAA,KAAK,EAAE;AAFgB,CAAzB;;AAKA,MAAMC,SAAS,GAAG,UAAUC,OAAV,EAAmB;AACnC,MAAI;AACFpB,IAAAA,EAAE,CAACmB,SAAH,CAAaC,OAAb;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ;AACA,QAAIA,GAAG,CAACC,IAAJ,KAAa,QAAjB,EAA2B;AACzB,YAAMD,GAAN;AACD;AACF;AACF,CATD;;AAWA,MAAME,SAAS,GAAG,YAAY;AAC5B,QAAMC,YAAY,GAAGjB,GAAG,CAACkB,gBAAJ;AAAwB;AAC1ClB,EAAAA,GAAG,CAACmB,OAAJ,GAAcvB,IAAI,CAACwB,IAAL,CAAUpB,GAAG,CAACmB,OAAd,EAAuB,WAAvB,CAAd,GAAoDvB,IAAI,CAACwB,IAAL,CAAUzB,EAAE,CAAC0B,OAAH,EAAV,EAAwB,MAAxB,CADlC,CAArB;AAEAT,EAAAA,SAAS,CAACK,YAAD,CAAT;AACA,QAAMK,gBAAgB,GAAG1B,IAAI,CAACwB,IAAL,CAAUH,YAAV,EAAwB,UAAxB,CAAzB;AACAL,EAAAA,SAAS,CAACU,gBAAD,CAAT;AACA,SAAOA,gBAAP;AACD,CAPD;;AASA,MAAMC,oBAAoB,GAAG,YAAY;AACvC,MAAItB,OAAO,CAACF,QAAR,KAAqB,OAAzB,EAAkC;AAChC,UAAMwB,oBAAoB,GAAG1B,SAAS,CAAE,oBAAmB2B,aAAa,EAAG,oCAArC,EAA0Ef,gBAA1E,CAAT,CAAqGgB,MAAlI;AACA;;AACA,WAAO,CAACF,oBAAoB,IAAI,EAAzB,EAA6BG,IAA7B,EAAP;AACD,GAJD,MAIO;AACL,WAAO,EAAP;AACD;AACF,CARD;;AAUA,MAAMC,kBAAkB,GAAG,YAAY;AACrC,QAAMC,iBAAiB,GAAG7B,QAAQ,EAAlC;AACA,QAAM8B,UAAU,GAAGjC,IAAI,CAACwB,IAAL,CAAUU,SAAV,EAAqB,IAArB,EAA2B,QAA3B,EAAqCxB,qBAArC,CAAnB;AACA,MAAIyB,gBAAJ;;AACA,MAAI;AACFA,IAAAA,gBAAgB,GAAGrC,OAAO,CAACE,IAAI,CAACwB,IAAL,CAAUS,UAAV,EAAsB,eAAtB,CAAD,CAA1B;AACD,GAFD,CAEE,OAAOf,GAAP,EAAY,CAAE;AAChB;;;AACA,MAAIiB,gBAAJ,EAAsB;AACpB;AACA,QAAIH,iBAAiB,KAAKG,gBAA1B,EAA4C;AAC1C,aAAO,IAAP;AACD,KAFD,MAEO;AACL,YAAM,IAAIC,KAAJ,CAAW,IAAGD,gBAAiB,qCAAoCH,iBAAkB,8FAA6FA,iBAAkB,aAApM,CAAN;AACD;AACF,GAPD,MAOO;AACL,WAAO,KAAP;AACD;AACF,CAlBD;;AAoBA,MAAMJ,aAAa,GAAG,YAAY;AAChC,MAAIvB,OAAO,CAACF,QAAR,KAAqB,OAAzB,EAAkC;AAChC,UAAMkC,iBAAiB,GAAGpC,SAAS,CAAC,6EAAD,EAAgFY,gBAAhF,CAAT,CAA2GgB,MAA3G,IAAqH,EAA/I;AACA,WAAO,CAACQ,iBAAiB,CAACP,IAAlB,EAAD,EAA2B1B,GAAG,CAACkC,eAA/B,EAAgD,0BAAhD,EAA4E,oBAA5E,EACJC,MADI,CACG,UAAUC,CAAV,EAAa;AAAE,aAAO,CAAC,CAACA,CAAT;AAAa,KAD/B,EAEJhB,IAFI,CAEC,GAFD,CAAP;AAGD,GALD,MAKO;AACL,WAAO,EAAP;AACD;AACF,CATD;;AAWA,MAAMiB,gBAAgB,GAAG,YAAY;AACnC,MAAIC,OAAO,CAACtC,GAAG,CAACuC,2BAAL,CAAP,KAA6C,IAAjD,EAAuD;AACrD,WAAO,KAAP;AACD;;AAED,QAAMC,iBAAiB,GAAGjB,oBAAoB,EAA9C;AACA,SAAO,CAAC,CAACiB,iBAAF;AAAuB;AAC5B1C,EAAAA,MAAM,CAAC2C,GAAP,CAAWD,iBAAX,EAA8BlC,qBAA9B,CADF;AAED,CARD;;AAUAoC,MAAM,CAACC,OAAP,GAAiB;AACfrC,EAAAA,qBADe;AAEfJ,EAAAA,6BAFe;AAGfc,EAAAA,SAHe;AAIfO,EAAAA,oBAJe;AAKfI,EAAAA,kBALe;AAMfH,EAAAA,aANe;AAOfa,EAAAA,gBAPe;AAQfzB,EAAAA;AARe,CAAjB","sourcesContent":["'use strict';\n\nconst fs = require('fs');\nconst os = require('os');\nconst path = require('path');\nconst spawnSync = require('child_process').spawnSync;\nconst semver = require('semver');\nconst platform = require('./platform');\n\nconst env = process.env;\nconst minimumLibvipsVersionLabelled = env.npm_package_config_libvips || /* istanbul ignore next */\n  require('../package.json').config.libvips;\nconst minimumLibvipsVersion = semver.coerce(minimumLibvipsVersionLabelled).version;\n\nconst spawnSyncOptions = {\n  encoding: 'utf8',\n  shell: true\n};\n\nconst mkdirSync = function (dirPath) {\n  try {\n    fs.mkdirSync(dirPath);\n  } catch (err) {\n    /* istanbul ignore if */\n    if (err.code !== 'EEXIST') {\n      throw err;\n    }\n  }\n};\n\nconst cachePath = function () {\n  const npmCachePath = env.npm_config_cache || /* istanbul ignore next */\n    (env.APPDATA ? path.join(env.APPDATA, 'npm-cache') : path.join(os.homedir(), '.npm'));\n  mkdirSync(npmCachePath);\n  const libvipsCachePath = path.join(npmCachePath, '_libvips');\n  mkdirSync(libvipsCachePath);\n  return libvipsCachePath;\n};\n\nconst globalLibvipsVersion = function () {\n  if (process.platform !== 'win32') {\n    const globalLibvipsVersion = spawnSync(`PKG_CONFIG_PATH=\"${pkgConfigPath()}\" pkg-config --modversion vips-cpp`, spawnSyncOptions).stdout;\n    /* istanbul ignore next */\n    return (globalLibvipsVersion || '').trim();\n  } else {\n    return '';\n  }\n};\n\nconst hasVendoredLibvips = function () {\n  const currentPlatformId = platform();\n  const vendorPath = path.join(__dirname, '..', 'vendor', minimumLibvipsVersion);\n  let vendorPlatformId;\n  try {\n    vendorPlatformId = require(path.join(vendorPath, 'platform.json'));\n  } catch (err) {}\n  /* istanbul ignore else */\n  if (vendorPlatformId) {\n    /* istanbul ignore else */\n    if (currentPlatformId === vendorPlatformId) {\n      return true;\n    } else {\n      throw new Error(`'${vendorPlatformId}' binaries cannot be used on the '${currentPlatformId}' platform. Please remove the 'node_modules/sharp' directory and run 'npm install' on the '${currentPlatformId}' platform.`);\n    }\n  } else {\n    return false;\n  }\n};\n\nconst pkgConfigPath = function () {\n  if (process.platform !== 'win32') {\n    const brewPkgConfigPath = spawnSync('which brew >/dev/null 2>&1 && eval $(brew --env) && echo $PKG_CONFIG_LIBDIR', spawnSyncOptions).stdout || '';\n    return [brewPkgConfigPath.trim(), env.PKG_CONFIG_PATH, '/usr/local/lib/pkgconfig', '/usr/lib/pkgconfig']\n      .filter(function (p) { return !!p; })\n      .join(':');\n  } else {\n    return '';\n  }\n};\n\nconst useGlobalLibvips = function () {\n  if (Boolean(env.SHARP_IGNORE_GLOBAL_LIBVIPS) === true) {\n    return false;\n  }\n\n  const globalVipsVersion = globalLibvipsVersion();\n  return !!globalVipsVersion && /* istanbul ignore next */\n    semver.gte(globalVipsVersion, minimumLibvipsVersion);\n};\n\nmodule.exports = {\n  minimumLibvipsVersion,\n  minimumLibvipsVersionLabelled,\n  cachePath,\n  globalLibvipsVersion,\n  hasVendoredLibvips,\n  pkgConfigPath,\n  useGlobalLibvips,\n  mkdirSync\n};\n"]},"metadata":{},"sourceType":"script"}